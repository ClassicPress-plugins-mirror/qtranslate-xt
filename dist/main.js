(()=>{"use strict";var e,t,n=function(e,t,n,a){var i=document.createElement(e);if(t)for(var o in t)i[o]=t[o];return n&&(a&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i},a=window.qTranslateConfig,i=function(e){var t="(\x3c!--:lang--\x3e|\x3c!--:--\x3e|\\[:lang]|\\[:]|{:lang}|{:})".replace(/lang/g,a.lang_code_format),n=new RegExp(t,"gi");if(3==="a~b".split(/(~)/).length)return e.split(n);for(var i,o=0,r=[];null!=(i=n.exec(e));)r.push(e.slice(o,i.index)),i.length>1&&r.push(i[1]),o=n.lastIndex;return o<e.length&&r.push(e.slice(o)),o===e.length&&r.push(""),r},o=function(e){var t=i(e);return r(t)},r=function(e){var t=new Object;for(var n in a.language_config)t[n]="";if(!e||!e.length)return t;if(1===e.length){var i=e[0];for(var o in a.language_config)t[o]+=i;return t}for(var r,s=new RegExp("\x3c!--:(lang)--\x3e".replace(/lang/g,a.lang_code_format),"gi"),l=new RegExp("\\[:(lang)]".replace(/lang/g,a.lang_code_format),"gi"),c=new RegExp("{:(lang)}".replace(/lang/g,a.lang_code_format),"gi"),d=!1,u=0;u<e.length;++u){var g=e[u];if(g.length)if(r=s.exec(g),s.lastIndex=0,null==r)if(r=l.exec(g),l.lastIndex=0,null==r)if(r=c.exec(g),c.lastIndex=0,null==r)if("\x3c!--:--\x3e"!==g&&"[:]"!==g&&"{:}"!==g)if(d)t[d]?t[d]+=g:t[d]=g,d=!1;else for(var f in t)t[f]+=g;else d=!1;else d=r[1];else d=r[1];else d=r[1]}return t},s="qtranslate-xt-admin-edit-language",l=function(e){try{sessionStorage.setItem(s,e)}catch(e){console.log('Failed to store "'+s+'" with sessionStorage',e)}},c=window.qTranslateConfig;e=jQuery,t=function(t){var a=this;this.getLanguages=function(){return c.language_config},this.getFlagLocation=function(){return c.flag_location},this.isLanguageEnabled=function(e){return!!c.language_config[e]},c.LSB?(c.activeLanguage=sessionStorage.getItem(s),c.activeLanguage&&this.isLanguageEnabled(c.activeLanguage)||(c.activeLanguage=c.language,this.isLanguageEnabled(c.activeLanguage)?l(c.activeLanguage):c.LSB=!1)):(c.activeLanguage=c.language,l(c.activeLanguage)),this.getActiveLanguage=function(){return c.activeLanguage};var d={};this.hasContentHook=function(e){return d[e]},this.addContentHook=function(t,i,r){if(!t)return!1;switch(t.tagName){case"TEXTAREA":break;case"INPUT":switch(t.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!r){if(!t.name)return!1;r=t.name}if(t.id){if(d[t.id]){if(e.contains(document,t))return d[t.id];a.removeContentHook(t)}}else if(d[r]){var s=0;do{++s,t.id=r+s}while(d[t.id])}else t.id=r;t.className+=" qtranxs-translatable";var l,u,g,f=d[t.id]={};if(f.name=r,f.contentField=t,f.lang=c.activeLanguage,i)switch(i){case"slug":l="qtranslate-slugs[";break;case"term":l="qtranslate-terms[";break;default:l="qtranslate-fields["}else i="[",l="qtranslate-fields[";f.encode=i;var h,v=f.name.indexOf("[");if(v<0)u=l+f.name+"]";else if(u=l+f.name.substring(0,v)+"]",f.name.lastIndexOf("[]")<0)u+=f.name.substring(v);else{var m=f.name.length-2;m>v&&(u+=f.name.substring(v,m)),g="[]"}if(f.fields={},!c.RAW){for(var p in h=o(t.value),t.value=h[f.lang],h){var y=h[p],w=u+"["+p+"]";g&&(w+=g);var b=n("input",{name:w,type:"hidden",className:"hidden",value:y});f.fields[p]=b,t.parentNode.insertBefore(b,t)}var C=e(t).closest("form");C.length?C.find('input[name="qtranslate-edit-language"]').length||n("input",{type:"hidden",name:"qtranslate-edit-language",value:c.activeLanguage},C[0],!0):console.error("No form found for translatable field id=",t.id)}switch(i){case"slug":case"term":c.RAW&&(h=o(t.value)),f.sepfield=n("input",{name:u+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:h[c.default_language]});break;default:c.RAW||(f.sepfield=n("input",{name:u+"[qtranslate-separator]",type:"hidden",className:"hidden",value:i}))}return f.sepfield&&t.parentNode.insertBefore(f.sepfield,t),f},this.addContentHookC=function(e){return a.addContentHook(e,"[")},this.addContentHookB=function(e){return a.addContentHook(e,"[")},this.addContentHookById=function(e,t,n){return a.addContentHook(document.getElementById(e),t,n)},this.addContentHookByIdName=function(e){var t;switch(e[0]){case"<":case"[":t=e.substring(0,1),e=e.substring(1)}return a.addContentHookById(e,t)},this.addContentHookByIdC=function(e){return a.addContentHookById(e,"[")},this.addContentHookByIdB=function(e){return a.addContentHookById(e,"[")},this.addContentHooks=function(e,t,n){for(var i=0;i<e.length;++i){var o=e[i];a.addContentHook(o,t,n)}},this.addContentHooksByClass=function(e,t){var n;0!==e.indexOf("<")&&0!==e.indexOf("[")||(n=e.substring(0,1),e=e.substring(1)),function(e,t,n){t||(t=document);var i=t.getElementsByClassName(e);a.addContentHooks(i,n)}(e,t,n)},this.addContentHooksByTagInClass=function(e,t,n){for(var i=n.getElementsByClassName(e),o=0;o<i.length;++o){var r=i[o].getElementsByTagName(t);a.addContentHooks(r)}};var u=function(t){if(!t)return!1;t.sepfield&&e(t.sepfield).remove();var n={};for(var a in t.fields){var i=t.fields[a];n[a]=i.value,e(i).remove()}return e(t.contentField).removeClass("qtranxs-translatable"),delete d[t.contentField.id],n};this.removeContentHook=function(t){if(!t||!t.id||!d[t.id])return!1;var n=d[t.id];return u(n),e(t).removeClass("qtranxs-translatable"),!0},this.refreshContentHook=function(e){if(!e||!e.id)return!1;var t=d[e.id];return t&&u(t),a.addContentHook(e)};var g=function(e){if(e[c.language])return"("+c.language+") "+e[c.language];if(e[c.default_language])return"("+c.default_language+") "+e[c.default_language];for(var t in e)if(e[t])return"("+t+") "+e[t];return""},f=function(e){var t=null;for(var n in e)e[n]||(t||(t=g(e)),e[n]=t)},h=[],v=function(e){if(!e.nodeValue)return 0;var t=i(e.nodeValue);if(!t||!t.length||1===t.length)return 0;var n={};return n.nd=e,n.contents=r(t),f(n.contents),e.nodeValue=n.contents[c.activeLanguage],h.push(n),1},m=[],p=function(e,t){if(!e.hasAttribute(t))return 0;var n=e.getAttribute(t),a=i(n);if(!a||!a.length||1===a.length)return 0;var o={};return o.nd=e,o.attr=t,o.contents=r(a),f(o.contents),e.setAttribute(t,o.contents[c.activeLanguage]),m.push(o),1};this.addDisplayHook=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":return"submit"===e.type&&e.value?p(e,"value"):0}var t=0;if(e.childNodes&&e.childNodes.length)for(var n=0;n<e.childNodes.length;++n){var i=e.childNodes[n];switch(i.nodeType){case 1:t+=a.addDisplayHook(i);break;case 2:case 3:t+=v(i)}}return t},this.addDisplayHookById=function(e){return a.addDisplayHook(document.getElementById(e))};var y=function(e){var t=e.contentField.value;e.wpautop&&window.switchEditors&&(t=window.switchEditors.wpautop(t)),e.mce.setContent(t,{format:"html"})};this.addDisplayHooks=function(e){for(var t=0;t<e.length;++t){var n=e[t];a.addDisplayHook(n)}},this.addDisplayHookAttrs=function(e,t){for(var n=0;n<t.length;++n){var a=t[n];p(e,a)}},this.addDisplayHooksAttrs=function(e,t){for(var n=0;n<e.length;++n){var i=e[n];a.addDisplayHookAttrs(i,t)}},this.addDisplayHooksByClass=function(e,t){var n=t.getElementsByClassName(e);a.addDisplayHooks(n)},this.addDisplayHooksByTagInClass=function(e,t,n){for(var i=n.getElementsByClassName(e),o=0;o<i.length;++o){var r=i[o].getElementsByTagName(t);a.addDisplayHooks(r)}},this.addCustomContentHooks=function(){for(var e=0;e<c.custom_fields.length;++e){var t=c.custom_fields[e];a.addContentHookByIdName(t)}for(var n=0;n<c.custom_field_classes.length;++n){var i=c.custom_field_classes[n];a.addContentHooksByClass(i)}c.LSB&&a.addContentHooksTinyMCE()};var w=function(e){var t=e.id;if(t){var n=d[t];if(n&&!n.mce){n.mce=e,e.getContainer().className+=" qtranxs-translatable",e.getElement().className+=" qtranxs-translatable";var a=n.updateTinyMCEonInit;return null==a&&(a=e.getContent({format:"html"}).replace(/\s+/g,"")!==n.contentField.value.replace(/\s+/g,"")),a&&y(n),n}}};this.addContentHooksTinyMCE=function(){if(window.tinyMCEPreInit&&window.tinyMCE)for(var e in d){var t=d[e];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[e]){if(t.mceInit=tinyMCEPreInit.mceInit[e],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var n=tinymce.DOM.select("#wp-"+e+"-wrap");n&&n.length&&(t.wrapper=n[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[e].init_instance_callback=function(e){w(e)}}}},this.loadAdditionalTinyMceHooks=function(){window.tinyMCE&&tinyMCE.get().forEach((function(e){w(e)}))},c.onTabSwitchFunctions||(c.onTabSwitchFunctions=[]),c.onTabSwitchFunctionsSave||(c.onTabSwitchFunctionsSave=[]),c.onTabSwitchFunctionsLoad||(c.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(e){c.onTabSwitchFunctions.push(e)},this.addLanguageSwitchBeforeListener=function(e){c.onTabSwitchFunctionsSave.push(e)},this.delLanguageSwitchBeforeListener=function(e){for(var t=0;t<c.onTabSwitchFunctionsSave.length;++t)if(c.onTabSwitchFunctionsSave[t]===e)return void c.onTabSwitchFunctionsSave.splice(t,1)},this.addLanguageSwitchAfterListener=function(e){c.onTabSwitchFunctionsLoad.push(e)},this.delLanguageSwitchAfterListener=function(e){for(var t=0;t<c.onTabSwitchFunctionsLoad.length;++t)if(c.onTabSwitchFunctionsLoad[t]===e)return void c.onTabSwitchFunctionsLoad.splice(t,1)},this.enableLanguageSwitchingButtons=function(e){var t=e?"block":"none";for(var n in c.tabSwitches){for(var a=c.tabSwitches[n],i=0;i<a.length;++i){a[i].parentElement.style.display=t;break}break}};var b=function(){for(var e=document.getElementsByClassName("wrap"),t=0;t<e.length;++t){var n=e[t].getElementsByTagName("form");if(n.length)return n[0]}var a=document.getElementsByTagName("form");if(1===a.length)return a[0];for(var i=0;i<a.length;++i){var o=a[i];if(o.getElementsByClassName("wrap").length)return o}return null};if("function"==typeof t.addContentHooks&&t.addContentHooks(this),c.page_config&&c.page_config.forms&&function(t){for(var n in t){var i=t[n],o=void 0;if(i.form){if(i.form.id)o=document.getElementById(i.form.id);else if(i.form.jquery)o=e(i.form.jquery);else if(i.form.name){var r=document.getElementsByName(i.form.name);r&&r.length&&(o=r[0])}}else o=document.getElementById(n);for(var s in o||(o=b())||(o=document),i.fields){var l=i.fields[s],c=[];if(l.container_id){var d=document.getElementById(l.container_id);d&&c.push(d)}else l.container_jquery?c=e(l.container_jquery):l.container_class?c=document.getElementsByClassName(l.container_class):c.push(o);var u=l.encode;switch(u){case"none":continue;case"display":if(l.jquery)for(var g=0;g<c.length;++g){var f=c[g],h=e(f).find(l.jquery);l.attrs?a.addDisplayHooksAttrs(h,l.attrs):a.addDisplayHooks(h)}else{var v=l.id?l.id:s,m=document.getElementById(v);l.attrs?a.addDisplayHookAttrs(m,l.attrs):a.addDisplayHook(m)}break;case"[":case"<":case"{":case"byline":default:if(l.jquery)for(var p=0;p<c.length;++p){var y=c[p],w=e(y).find(l.jquery);a.addContentHooks(w,u,l.name)}else{var C=l.id?l.id:s;a.addContentHookById(C,u,l.name)}}}}}(c.page_config.forms),e(".i18n-multilingual").each((function(e,t){a.addContentHook(t,"[")})),e(".i18n-multilingual-curly").each((function(e,t){a.addContentHook(t,"{")})),e(".i18n-multilingual-term").each((function(e,t){a.addContentHook(t,"term")})),e(".i18n-multilingual-slug").each((function(e,t){a.addContentHook(t,"slug")})),e(".i18n-multilingual-display").each((function(e,t){a.addDisplayHook(t)})),!h.length&&!m.length){var C=!1;for(var L in d){C=!0;break}if(!C)return}if(this.onLoadLanguage=function(e,t){for(var n=c.onTabSwitchFunctionsLoad,a=0;a<n.length;++a)n[a].call(c.qtx,e,t)},this.switchActiveLanguage=function(t){if(c.activeLanguage!==t){if(c.activeLanguage){for(var n=!0,i=c.onTabSwitchFunctionsSave,o=0;o<i.length;++o)!1===i[o].call(c.qtx,c.activeLanguage,t)&&(n=!1);if(!n)return;for(var r=c.tabSwitches[c.activeLanguage],s=0;s<r.length;++s)r[s].classList.remove(c.lsb_style_active_class),e(r[s]).find(".button").removeClass("active")}var l=c.activeLanguage;c.activeLanguage=t,e('input[name="qtranslate-edit-language"]').val(t);for(var d=c.tabSwitches[c.activeLanguage],u=0;u<d.length;++u)d[u].classList.add(c.lsb_style_active_class),e(d[u]).find(".button").addClass("active");for(var g=c.onTabSwitchFunctions,f=0;f<g.length;++f)g[f].call(c.qtx,t,l);a.onLoadLanguage(t,l)}},this.clickSwitchLanguage=function(){var t=e(this).hasClass("button")?this.parentNode:this,n=t.lang;n?e(".qtranxs-lang-switch-wrap").hasClass("copying")?(a.copyContentFrom(n),e(t).find(".button").blur(),e(".qtranxs-lang-switch-wrap").removeClass("copying"),e(".qtranxs-lang-copy .button").removeClass("active")):a.switchActiveLanguage(n):alert("qTranslate-XT: This should not have happened: Please, report this incident to the developers: !lang")},this.toggleCopyFrom=function(){e(".qtranxs-lang-switch-wrap").toggleClass("copying"),e(".qtranxs-lang-copy .button").toggleClass("active"),e(".qtranxs-lang-switch-wrap").hasClass("copying")?e(".qtranxs-lang-switch").each((function(){e(this).attr("orig-title",e(this).attr("title")),e(this).attr("lang")===c.activeLanguage?e(this).attr("title",c.strings.CopyFromAlt):e(this).attr("title",c.strings.CopyFrom+" [:"+e(this).attr("lang")+"]")})):e(".qtranxs-lang-switch").each((function(){e(this).attr("title",e(this).attr("orig-title"))}))},this.copyContentFrom=function(e){var t=c.activeLanguage,n=!1;for(var i in d){var o=d[i],r=o.mce&&!o.mce.hidden,s=r?o.mce.getContent({format:"html"}):o.contentField.value;s||(s=o.fields[e].value)&&(o.contentField.value=s,r&&y(o),n=!0)}n&&a.onLoadLanguage(t,e)},this.createSetOfLSBwith=function(t){var i=n("ul",{className:"qtranxs-lang-switch-wrap "+t}),o=c.language_config;for(var r in c.tabSwitches||(c.tabSwitches={}),o){var s=o[r],l=c.flag_location,d=c.strings.ShowIn+s.admin_name+" [:"+r+"]",u=n("li",{lang:r,className:"qtranxs-lang-switch qtranxs-lang-switch-"+r,title:d,onclick:a.clickSwitchLanguage},i),g=u;"button"===c.lsb_style_subitem&&(g=n("button",{className:"button button-secondary",type:"button"},u)),n("img",{src:l+s.flag},g),n("span",{innerHTML:s.name},g),c.activeLanguage===r&&(u.classList.add(c.lsb_style_active_class),e(u).find(".button").addClass("active")),c.tabSwitches[r]||(c.tabSwitches[r]=[]),c.tabSwitches[r].push(u)}if(!c.hide_lsb_copy_content){var f=n("li",{className:"qtranxs-lang-copy"},i),h=n("button",{className:"button button-secondary",type:"button",title:c.strings.CopyFromAlt,onclick:a.toggleCopyFrom},f);n("span",{innerHTML:c.strings.CopyFrom},h)}return i},this.createSetOfLSB=function(){return a.createSetOfLSBwith(c.lsb_style_wrap_class+" widefat")},c.LSB){this.addContentHooksTinyMCE(),function(){var t=document.getElementById("qtranxs-meta-box-lsb");if(t){var n=t.getElementsByClassName("inside");if(n.length){t.className+=" closed",e(t).find(".hndle").remove();var i=document.createElement("span");t.insertBefore(i,n[0]),i.className="hndle ui-sortable-handle";var o=a.createSetOfLSBwith(c.lsb_style_wrap_class);i.appendChild(o),e("#qtranxs-meta-box-lsb .hndle").unbind("click.postboxes")}}}();var k=[];if(c.page_config&&c.page_config.anchors)for(var S in c.page_config.anchors){var _=c.page_config.anchors[S],x=document.getElementById(S);if(x)k.push({f:x,where:_.where});else if(_.jquery)for(var B=e(_.jquery),H=0;H<B.length;++H){var E=B[H];k.push({f:E,where:_.where})}}if(!k.length){var T=t.langSwitchWrapAnchor;T||(T=b()),T&&k.push({f:T,where:"before"})}for(var q=0;q<k.length;++q){var N=k[q];if(!N.where||N.where.indexOf("before")>=0){var I=a.createSetOfLSB();N.f.parentNode.insertBefore(I,N.f)}if(N.where&&N.where.indexOf("after")>=0){var F=a.createSetOfLSB();N.f.parentNode.insertBefore(F,N.f.nextSibling)}if(N.where&&N.where.indexOf("first")>=0){var A=a.createSetOfLSB();N.f.insertBefore(A,N.f.firstChild)}if(N.where&&N.where.indexOf("last")>=0){var D=a.createSetOfLSB();N.f.insertBefore(D,null)}}this.addLanguageSwitchListener((function(e){l(e);for(var t=h.length;--t>=0;){var n=h[t];n.nd.parentNode?n.nd.nodeValue=n.contents[e]:h.splice(t,1)}for(var a=m.length;--a>=0;){var o=m[a];o.nd.parentNode?o.nd.setAttribute(o.attr,o.contents[e]):m.splice(a,1)}if(!c.RAW)for(var s in d){var u=d[s],g=u.mce&&!u.mce.hidden;g&&u.mce.save({format:"html"});var f=u.contentField.value.trim(),v=i(f);if(!v||v.length<=1){u.fields[u.lang].value=f,u.lang=e;var p=u.fields[u.lang].value;u.contentField.placeholder&&""!==p&&(u.contentField.placeholder=""),u.contentField.value=p,g&&y(u)}else{var w=r(v);for(var b in u.fields)u.fields[b].value=w[b];u.lang=e}}})),t.onTabSwitch&&this.addLanguageSwitchListener(t.onTabSwitch)}},c.js.get_qtx=function(){return c.qtx||(c.qtx=new t(c.js)),c.qtx},e(window).on("load",(function(){c.js.get_qtx().loadAdditionalTinyMceHooks()}))})();